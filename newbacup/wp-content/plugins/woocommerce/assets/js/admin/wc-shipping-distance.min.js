!function(t){function e(t){return Array.isArray(t)&&t.length>0?newInput=t.map(t=>({...t})):[]}var n,a,s=[];function i(){var e="";a.forEach(t=>{e+=`<tr>\n                <td>\n                    <span class="distance-label">\n                        ${parseFloat(t.distance_from)} - ${parseFloat(t.distance_to)} km\n                        <div class="row-actions">\n                            <a class="wc-shipping-class-edit" href="#">${shippingDistanceLocalizeScript.editLabel}</a> | <a href="#" class="wc-shipping-class-delete">${shippingDistanceLocalizeScript.removeLabel}</a>\n                        </div>\n                    </span>\n                    <span class="distance-input-edit">\n                        <input type="number" step="0.01" name="distance_from" class="input_distance_from" placeholder="from" value="${parseFloat(t.distance_from)}"> -\n                        <input type="number" step="0.01" class="input_distance_to" name="distance_to" placeholder="to" value="${parseFloat(t.distance_to)}">\n                        <p><a class="button-cancel-changes">Cancel changes</a></p>\n                    </span>\n                </td>\n                <td>\n                    <span class="distance-label">\n                        ${parseFloat(t.distance_cost)}\n                    </span>\n                    <span class="distance-input-edit">\n                        <input type="number" step="0.01" class="input_cost" name="distance_cost" placeholder="cost" value="${parseFloat(t.distance_cost)}">\n                    </span>\n                </td>\n                <td></td>\n            </tr>`}),t(".wc-shipping-distance tbody").html(e)}function c(e){t(".wc-shipping-distance tbody tr").eq(e).remove(),a.splice(e,1)}function o(){t("button.wc-shipping-distance-save").prop("disabled",!1)}n=e(shippingDistanceLocalizeScript.data),a=e(shippingDistanceLocalizeScript.data),i(),t("body").on("click",".wc-shipping-distance .wc-shipping-distance-add",function(e){e.preventDefault();const[n]=a.slice(-1);!function(e){a.push({distance_from:parseFloat(e),distance_to:parseFloat(e),distance_cost:0});var n=`<tr>\n            <td>\n                <input type="number" step="0.01" name="distance_from" class="input_distance_from" placeholder="from" value="${parseFloat(e)}"> - <input type="number" step="0.01" class="input_distance_to" name="distance_to" placeholder="to" value="${parseFloat(e)}">\n                <p><a class="button-cancel-changes">Cancel changes</a></p>\n            </td>\n            <td>\n                <input type="number" step="0.01" class="input_cost" name="distance_cost" placeholder="cost" value="0">\n            </td>\n            <td></td>\n        </tr>`;t(".wc-shipping-distance tbody").append(n)}(n?n.distance_to:0),o()}),t("body").on("input",'.wc-shipping-distance input[type="number"]',function(e){let n=t(this).val(),s=t(this).attr("name"),i=t(this).closest("tr").index();""==n&&(n=0);let c=a.slice();c[i][s]=n,a=c,o()}),t("body").on("click",".button-cancel-changes",function(e){e.preventDefault();let s=t(this).closest("tr").index();a[s].id?(a[s]={...n[s]},t(this).closest("tr").removeClass("editing")):(c(s),o())}),t("body").on("click",".wc-shipping-distance .wc-shipping-class-edit",function(e){e.preventDefault();t(this).closest("tr").index();t(this).closest("tr").addClass("editing")}),t("body").on("click",".wc-shipping-distance .wc-shipping-class-delete",function(e){e.preventDefault();let n=t(this).closest("tr").index();a[n].id&&s.push(a[n].id),c(n),o()}),t("body").on("click","button.wc-shipping-distance-save",function(c){c.preventDefault(),function(){if(!function(){for(var t=0;t<a.length;t++){let e=a[t];if(""===e.distance_from||""===e.distance_to||""===e.distance_cost)return!1}return!0}())return void alert("All fields are required!");if(!function(){for(var t=0;t<a.length;t++){let e=a[t];if(parseFloat(e.distance_from)>parseFloat(e.distance_to))return!1}return!0}())return void alert("Distance from is not valid!");if(function(){for(let t=0;t<a.length;t++)for(let e=t;e<a.length;e++){if(t==e)continue;let n=a[t],s=a[e];if(parseFloat(n.distance_from)==parseFloat(s.distance_from)&&parseFloat(n.distance_to)==parseFloat(s.distance_to))return!0;if(parseFloat(n.distance_from)>parseFloat(s.distance_from)&&parseFloat(n.distance_from)<parseFloat(s.distance_to))return!0;if(parseFloat(n.distance_to)>parseFloat(s.distance_from)&&parseFloat(n.distance_to)<parseFloat(s.distance_to))return!0;if(parseFloat(s.distance_from)>parseFloat(n.distance_from)&&parseFloat(s.distance_from)<parseFloat(n.distance_to))return!0;if(parseFloat(s.distance_to)>parseFloat(n.distance_from)&&parseFloat(s.distance_to)<parseFloat(n.distance_to))return!0}return!1}())return void alert("The distance is existing in other range!");jQuery.ajax({type:"POST",url:shippingDistanceLocalizeScript.url,dataType:"json",data:{list_deletes:s,changes:a,action:"woocommerce_shipping_distance_save_changes",wc_shipping_distance_nonce:shippingDistanceLocalizeScript.wc_shipping_distance_nonce},beforeSend:function(){t(".wc-shipping-distance").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},success:function(s){s.success?(a=e(s.data),n=e(s.data),i(),t(".wc-shipping-distance tr").removeClass("editing"),t("button.wc-shipping-distance-save").prop("disabled",!0)):alert(s.data)},complete:function(){t(".wc-shipping-distance").unblock()}})}()})}(jQuery,shippingDistanceLocalizeScript);