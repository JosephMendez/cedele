"use strict";(function(){jQuery(document).ready(function(a){function c(){return{formatMatches:function(e){return 1===e?wc_enhanced_select_params.i18n_matches_1:wc_enhanced_select_params.i18n_matches_n.replace("%qty%",e)},formatNoMatches:function(){return wc_enhanced_select_params.i18n_no_matches},formatAjaxError:function(){return wc_enhanced_select_params.i18n_ajax_error},formatInputTooShort:function(e,i){var t=i-e.length;return 1==t?wc_enhanced_select_params.i18n_input_too_short_1:wc_enhanced_select_params.i18n_input_too_short_n.replace("%qty%",t)},formatInputTooLong:function(e,i){var t=e.length-i;return 1==t?wc_enhanced_select_params.i18n_input_too_long_1:wc_enhanced_select_params.i18n_input_too_long_n.replace("%qty%",t)},formatSelectionTooBig:function(e){return 1===e?wc_enhanced_select_params.i18n_selection_too_long_1:wc_enhanced_select_params.i18n_selection_too_long_n.replace("%qty%",e)},formatLoadMore:function(){return wc_enhanced_select_params.i18n_load_more},formatSearching:function(){return wc_enhanced_select_params.i18n_searching}}}var e,s,l,i,t,n,o,r,_,p,u,d,h,m,w,f,k,g,v,b,y,j,x,q=null!=(j=window.wc_local_pickup_plus_admin)?j:{},C=null!=(x=window.pagenow)?x:"";if(q.initializeEnhancedSelect=function(e,i){var t;return a(e).is(".enhanced")&&a(e).removeClass("enhanced"),t={allowClear:!!a(e).data("allow_clear"),placeholder:a(e).data("placeholder"),minimumInputLength:a(e).data("minimum_input_length")?a(e).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:q.ajax_url,cache:!1,dataType:"json",delay:250,data:function(e){return a.extend({term:e.term},i)},processResults:function(e){var t=[];return e&&a.each(e,function(e,i){return t.push({id:e,text:i})}),{results:t}}}},t=a.extend(t,c()),a(e).select2(t).addClass("enhanced")},"woocommerce_page_wc-settings"===C&&(o=a("#woocommerce_local_pickup_plus_enable_per_item_selection"),t=a("#woocommerce_local_pickup_plus_item_handling"),o&&t&&(n=t.closest("td").parent(),r=a("#woocommerce_local_pickup_plus_default_handling").closest("td").parent(),o.on("change",function(e){return"per-order"===a(this).val()?(n.show(),r.show()):(n.hide(),r.hide())}),o.trigger("change"),t.trigger("change")),(m=a("#woocommerce_local_pickup_plus_pickup_locations_sort_order"))&&(e=a("#woocommerce_local_pickup_plus_google_maps_api_key"),f=a("#woocommerce_local_pickup_plus_enable_logging"),w=f.closest("tr"),p=m.find('option[value="distance_customer"]'),_=m.find('option[value="default"]'),y=m.next("p.description"),e&&p&&_&&(e.on("change keyup paste",function(e){return""===a(this).val()?(f.prop("checked",!1),w.hide(),y.show(),"distance_customer"===m.val()&&(m.val("default"),m.trigger("change")),p.prop("disabled","disabled")):(p.removeProp("disabled"),w.show(),y.hide())}),e.trigger("change")),m.trigger("change")),i=a("#woocommerce_local_pickup_plus_pickup_appointments_mode"),s=a(".wc-local-pickup-plus-appointment-duration-field").closest("td").parent(),l=a(".wc-local-pickup-plus-appointment-limits-field").closest("td").parent(),i.on("change",function(e){var i=a(".wc-local-pickup-plus-business-hours-field").closest("td").parent(),t=a("#woocommerce_local_pickup_plus_default_public_holidays").closest("td").parent(),c=a("#woocommerce_local_pickup_plus_default_lead_time_amount").closest("td").parent(),n=a("#woocommerce_local_pickup_plus_default_deadline_amount").closest("td").parent(),o=a('[name="woocommerce_local_pickup_plus_lead_time_calculation"]').closest("td").parent();return"disabled"===a(this).val()?(s.hide(),i.hide(),t.hide(),c.hide(),n.hide(),o.hide()):(s.show(),i.show(),t.show(),c.show(),n.show(),o.show()),"required"===a(this).val()?l.show():l.hide()}),i.trigger("change"),l.find("input[type=radio]").on("change",function(e){return"unlimited"===a(this).val()?(a(this).closest("ul").find("input[type=number]").prop("disabled",!0),a(this).closest("ul").find("p").hide()):(a(this).closest("ul").find("input[type=number]").prop("disabled",!1),a(this).closest("ul").find("p").show())}),q.appointments_max_customers_dismissed||"required"!==i.val()||l.parents("form").on("submit",function(e){var i,t=a("#woocommerce_local_pickup_plus_default_appointment_duration"),c=a('input[name="woocommerce_local_pickup_plus_default_appointment_limits"]:checked'),n=a("#woocommerce_local_pickup_plus_default_appointment_limits_max_customers"),o=n.val();return!("86400"===t.val()&&"limited"===c.val()&&o<5)||(i=(i=q.i18n.appointments_max_customers_warning).replace("{{count}}",o),confirm(i)?void 0:(e.preventDefault(),n.focus()))})),"wc_pickup_location"===C&&(a("#edit-pickup-location-coordinates").on("click",function(e){return a(".edit-pickup-location-coordinates").toggle()}),a("#_products_availability_mode").on("change",function(e){return"any"===a(this).val()?(a(".js-show-if-products-availability-is-some").hide(),a(".js-show-if-products-availability-is-any").show()):(a(".js-show-if-products-availability-is-some").show(),a(".js-show-if-products-availability-is-any").hide())}),a("#pickup-location-products button").on("click",function(e){var i,t,c;return e.preventDefault(),c=(i=a(this).parent("p")).find(".js-search-products"),t=i.find("> span"),a(this).hide(),a(this).prev("button").show(),a(this).next("button").show(),a(this).hasClass("js-add-products")||a(this).hasClass("js-add-product-categories")?t.show():(c.val("").trigger("change"),t.hide())}),a("#_price_adjustment_enabled").on("click",function(e){var i=a(".js-show-if-price-adjustment-enabled");return a(this).is(":checked")?i.show():i.hide()}),a("#_business_hours_enabled").on("click",function(e){var i=a(".js-show-if-business-hours-enabled");return a(this).is(":checked")?i.show():i.hide()}),a("#_public_holidays_enabled").on("click",function(e){var i=a(".js-show-if-public-holidays-enabled");return a(this).is(":checked")?i.show():i.hide()}),a("#_pickup_lead_time_enabled").on("click",function(e){var i=a(".js-show-if-lead-time-enabled");return a(this).is(":checked")?i.show():i.hide()}),a("#_pickup_deadline_enabled").on("click",function(e){var i=a(".js-show-if-deadline-enabled");return a(this).is(":checked")?i.show():i.hide()}),a("ul.wc-tabs").show(),a("div.panel-wrap").each(function(){return a(this).find("div.panel:not(:first)").hide()}),a("ul.wc-tabs a").click(function(){var e=a(this).attr("href"),i=a(this).closest("div.panel-wrap");return a("ul.wc-tabs li",i).removeClass("active"),a(this).parent().addClass("active"),a("div.panel",i).hide(),a(e).show()}),a("ul.wc-tabs li:visible").eq(0).find("a").click()),"admin_page_wc_local_pickup_plus_export"!==C&&"admin_page_wc_local_pickup_plus_import"!==C||(h=(u=a(".wc-local-pickup-plus > form")).find("h2"),(d=u.find(".wc-admin-breadcrumb")).show(),d.appendTo(h)),"edit-shop_order"!==C&&"woocommerce_page_wc_customer_order_csv_export"!==C&&"woocommerce_page_wc_customer_order_xml_export_suite"!==C||(b=a(".wc-local-pickup-plus-pickup-location-search"))&&q.initializeEnhancedSelect(b,{action:"wc_local_pickup_plus_json_search_pickup_location_ids",security:q.search_pickup_locations_nonce}),"shop_order"===C&&(k=a(".wc-local-pickup-plus-order-shipping-item-pickup-data"))&&(b=k.find(".wc-local-pickup-plus-pickup-location-search"),g=k.find("input.pickup-date"),v=k.find("select.wc-local-pickup-plus-appointment-offset"),b&&q.initializeEnhancedSelect(b,{action:"wc_local_pickup_plus_json_search_pickup_location_ids",security:q.search_pickup_locations_nonce}),g&&g.datepicker({dateFormat:"yy-mm-dd"}),v))return v.select2()})}).call(void 0);